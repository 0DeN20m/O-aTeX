## parse-cwl.tsの用意

[ここ](https://qiita.com/Yarakashi_Kikohshi/items/b2c3aad84b816b981ff1)を参考にしてaTeX-Workshopのリポジトリをクローンする

## ts-nodeをインストールする

`.config/LaTeX-Workshop`内で以下を実行：
```Linux
apt update
apt install nodejs npm
npm install n -g
n stable
apt purge -y nodejs npm
exec $SHELL -l
npm install --save typescript ts-node (2回目以降はいらないかも)
```
`./dev`に移動して以下を実行：
```linux
npm install --save-dev @types/node (2回目以降はいらないかも)
```
`tsconfig.json`を以下のように修正(2回目以降いらない)：
```json
"target": "es2021",
"lib": [
    "es2021"
],
```

## ディレクトリの用意
`dev/`直下に`cwl/`と`packages/`を作成する

## 変換
`dev/`内で以下を実行：
```linux
ls cwl | xargs -I {} ../node_modules/.bin/ts-node parse-cwl.ts {}
```

## 配置
生成された`json`を`.config/intellisense`に配置する

## detail/docの適用

### 準備
各インテリセンスファイルに対して、`<basename>.details.json`ファイルを作成する。
例：`my-common.json` → `my-common.details.json`

### detailsファイルの形式
```json
{
  "macros": {
    "マクロ名": {
      "detail": "簡潔な表示（記号など）",
      "doc": "詳細な説明"
    }
  },
  "envs": {
    "環境名": {
      "detail": "簡潔な表示",
      "doc": "詳細な説明"
    }
  }
}
```

### 適用方法
`.config/intellisense`ディレクトリで以下を実行：

```bash
# 全てのインテリセンスファイルに適用
node apply-details.js

# 特定のファイルにのみ適用
node apply-details.js my-common.json
node apply-details.js my-common.json mystyle.json
```

### ワークフロー
1. parse-cwl.tsでcwlファイルからJSONを生成
2. `.config/intellisense`に配置
3. `apply-details.js`でdetail/docを適用

これにより、parse-cwl実行後も手動で追加したdetail/doc情報を保持できる。